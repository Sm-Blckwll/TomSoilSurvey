<!DOCTYPE html>
<html>

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-D5KQC3MM8K"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-D5KQC3MM8K');
  </script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tom Soil Tracker</title>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css" />
  <style>
    @import url('./base.css');
  </style>
  <link rel="manifest" href="manifest.json">
  <script>
    if ("serviceWorker" in navigator) {
      // register service worker
      navigator.serviceWorker.register("service-worker.js")
        .then(function (registration) {
          console.log("success load");
        })
        .catch(function (err) {
          console.log(err);
        });
    }
  </script>
</head>

<body>
  <div class="top-bar">
    <div class="textCon">
      <div class="emoji-small">üåç</div>
      <div class="text" id="day"> Tom's Soil Survey Map</div>
    </div>
  </div>

  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js"></script>
  <script src="geolet.js"></script>
  <script src="https://unpkg.com/esri-leaflet@3.0.10/dist/esri-leaflet.js"></script>
  <script src="https://unpkg.com/esri-leaflet-vector@4.0.0/dist/esri-leaflet-vector.js"></script>

  <script>

    const apiKey = "AAPK6d8dbbe84b034f5eba140cfdb06f70bckM0zbt6jwcBbSKTDT665flH_W-GHXfSHK1EHcXhE7GziB4MMZV1aj5U9Xya-YWRL";
    const basemapEnum = "ArcGIS:Imagery";
    const basemapPlain = "ArcGIS:Streets";

    const map = L.map("map", {
      minZoom: 2
    }).setView([51.0156, -4.5042], 16);

    const Imagery = L.esri.Vector.vectorBasemapLayer(basemapEnum, {
      apiKey: apiKey
    }).addTo(map);

    const Street = L.esri.Vector.vectorBasemapLayer(basemapPlain, {
      apiKey: apiKey
    })

    const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    });

    const layerControl = L.control.layers({ "OSM": osm, "Imagery": Imagery, "Street": Street }).addTo(map);

    let polygonsCoords = [
      [[51.01753, -4.50347], [51.01687, -4.50357], [51.01672, -4.50143], [51.01761, -4.50152]],
      [[51.01752, -4.50138], [51.01670, -4.50131], [51.01679, -4.49730], [51.01759, -4.49770]],
      [[51.01772, -4.49755], [51.01679, -4.49717], [51.01585, -4.49696], [51.01588, -4.49572], [51.01709, -4.49607], [51.01726, -4.49430], [51.01803, -4.49448]],
      [[51.01679, -4.50355], [51.01665, -4.50358], [51.01642, -4.50302], [51.01625, -4.50289], [51.01614, -4.50287], [51.01599, -4.50186], [51.01587, -4.50193], [51.01582, -4.50134], [51.01664, -4.50121], [51.01670, -4.50257]],
      [[51.01665, -4.50110], [51.01582, -4.50125], [51.01579, -4.49952], [51.01587, -4.49820], [51.01586, -4.49707], [51.01674, -4.49723]],
      [[51.01548, -4.50395], [51.01431, -4.50342], [51.01409, -4.50316], [51.01385, -4.50235], [51.01404, -4.50138], [51.01441, -4.50160], [51.01576, -4.50194], [51.01574, -4.50364], [51.01549, -4.50367]],
      [[51.01571, -4.50182], [51.01449, -4.50154], [51.01415, -4.50128], [51.01440, -4.50052], [51.01451, -4.50014], [51.01568, -4.50041]],
      [[51.01569, -4.50031], [51.01453, -4.50007], [51.01464, -4.49877], [51.01463, -4.49787], [51.01452, -4.49713], [51.01438, -4.49629], [51.01425, -4.49556], [51.01472, -4.49540], [51.01581, -4.49565], [51.01580, -4.49815]],
      [[51.01159, -4.49983], [51.01108, -4.49908], [51.01111, -4.49797], [51.01112, -4.49646], [51.01108, -4.49628], [51.01111, -4.49580], [51.01144, -4.49411], [51.01178, -4.49314], [51.01209, -4.49318], [51.01185, -4.49512], [51.01311, -4.49702], [51.01332, -4.49753], [51.01330, -4.49773], [51.01308, -4.49761], [51.01286, -4.49752], [51.01213, -4.49682], [51.01193, -4.49864], [51.01177, -4.49940]],
      [[51.01235, -4.50067], [51.01203, -4.50049], [51.01167, -4.49994], [51.01194, -4.49901], [51.01216, -4.49694], [51.01297, -4.49766], [51.01291, -4.49914], [51.01280, -4.49999], [51.01254, -4.50049]],
      [[51.01510, -4.50542], [51.01449, -4.50533], [51.01389, -4.50486], [51.01375, -4.50406], [51.01377, -4.50300], [51.01385, -4.50296], [51.01408, -4.50340], [51.01434, -4.50362], [51.01537, -4.50416], [51.01545, -4.50431], [51.01502, -4.50432], [51.01500, -4.50461]],
      [[51.01616, -4.50349], [51.01608, -4.50356], [51.01606, -4.50362], [51.01607, -4.50382], [51.01588, -4.50387], [51.01584, -4.50328], [51.01589, -4.50269], [51.01586, -4.50218], [51.01599, -4.50217], [51.01608, -4.50295]],
      [[51.01658, -4.50364], [51.01628, -4.50376], [51.01613, -4.50296], [51.01627, -4.50297], [51.01643, -4.50315], [51.01653, -4.50347]],
      [[51.01686, -4.50473], [51.01691, -4.50447], [51.01668, -4.50424], [51.01690, -4.50377], [51.01708, -4.50380], [51.01759, -4.50364], [51.01793, -4.50385], [51.01816, -4.50379], [51.01827, -4.50390], [51.01829, -4.50415], [51.01820, -4.50472], [51.01817, -4.50523], [51.01808, -4.50533], [51.01770, -4.50526], [51.01738, -4.50513]],

      [[50.98692, -4.33917], [50.98645, -4.33848], [50.98623, -4.33748], [50.98639, -4.33525], [50.98722, -4.33559]],
      [[50.98723, -4.33550], [50.98640, -4.33515], [50.98678, -4.33275], [50.98756, -4.33303]],
      [[50.98760, -4.33298], [50.98710, -4.33283], [50.98678, -4.33260], [50.98685, -4.33125], [50.98680, -4.33048], [50.98714, -4.33065], [50.98769, -4.33069], [50.98767, -4.33143], [50.98766, -4.33243]],
      [[50.98772, -4.33057], [50.98718, -4.33057], [50.98682, -4.33037], [50.98673, -4.32995], [50.98674, -4.32908], [50.98685, -4.32838], [50.98691, -4.32809], [50.98702, -4.32817], [50.98695, -4.32861], [50.98714, -4.32868], [50.98724, -4.32844], [50.98736, -4.32838], [50.98735, -4.32817], [50.98753, -4.32813], [50.98771, -4.32839], [50.98778, -4.32867], [50.98772, -4.32993]],
      [[50.98713, -4.33821], [50.98757, -4.33398], [50.98819, -4.33427], [50.98819, -4.33451], [50.98822, -4.33488], [50.98815, -4.33603], [50.98806, -4.33643], [50.98796, -4.33740], [50.98783, -4.33798]],
      [[50.98756, -4.33387], [50.98777, -4.33267], [50.98779, -4.33130], [50.98785, -4.33047], [50.98847, -4.33082], [50.98872, -4.32978], [50.98891, -4.32985], [50.98842, -4.33221], [50.98843, -4.33281], [50.98834, -4.33329], [50.98805, -4.33414]],
      [[50.98846, -4.33067], [50.98788, -4.33036], [50.98793, -4.32846], [50.98859, -4.32877], [50.98868, -4.32940], [50.98864, -4.32994]],
      [[50.98786, -4.32817], [50.98789, -4.32741], [50.98777, -4.32635], [50.98817, -4.32632], [50.98858, -4.32646], [50.98881, -4.32681], [50.98901, -4.32681], [50.98897, -4.32900], [50.98891, -4.32899], [50.98857, -4.32854], [50.98812, -4.32832]],
      [[50.98779, -4.32620], [50.98767, -4.32473], [50.98769, -4.32264], [50.98822, -4.32276], [50.98891, -4.32318], [50.98902, -4.32660], [50.98881, -4.32660], [50.98854, -4.32631], [50.98821, -4.32619]],
      [[50.98774, -4.32254], [50.98786, -4.32179], [50.98791, -4.32170], [50.98806, -4.32165], [50.98845, -4.32087], [50.98855, -4.32047], [50.98859, -4.32048], [50.98862, -4.32064], [50.98895, -4.32122], [50.98887, -4.32183], [50.98894, -4.32259], [50.98893, -4.32301], [50.98889, -4.32307], [50.98829, -4.32270], [50.98781, -4.32256]],
      [[50.98918, -4.32505], [50.98913, -4.32486], [50.98914, -4.32347], [50.98900, -4.32310], [50.98897, -4.32296], [50.98899, -4.32266], [50.98896, -4.32196], [50.98893, -4.32184], [50.98902, -4.32116], [50.98923, -4.32136], [50.98971, -4.32129], [50.98979, -4.32165], [50.98977, -4.32209], [50.98949, -4.32315], [50.98948, -4.32348], [50.98950, -4.32425], [50.98948, -4.32491], [50.98940, -4.32508], [50.98929, -4.32510]],
      [[50.98935, -4.32111], [50.98931, -4.32083], [50.98921, -4.32060], [50.98941, -4.31906], [50.98990, -4.31926], [50.98979, -4.31965], [50.98973, -4.32025], [50.98970, -4.32112]],
      [[50.98866, -4.32015], [50.98874, -4.31961], [50.98905, -4.31963], [50.98910, -4.31927], [50.98933, -4.31933], [50.98916, -4.32064], [50.98904, -4.32066], [50.98879, -4.32020]],
      [[50.98910, -4.31922], [50.98910, -4.31919], [50.98895, -4.31911], [50.98899, -4.31848], [50.98893, -4.31841], [50.98899, -4.31782], [50.98906, -4.31782], [50.98908, -4.31754], [50.98969, -4.31761], [50.99003, -4.31774], [50.99004, -4.31854], [50.99007, -4.31897], [50.99003, -4.31915], [50.98938, -4.31896], [50.98933, -4.31928]],
      [[50.98900, -4.31746], [50.98903, -4.31599], [50.98894, -4.31417], [50.98979, -4.31388], [50.99049, -4.31396], [50.99027, -4.31521], [50.99002, -4.31765], [50.98959, -4.31751]],
      [[50.99027, -4.31727], [50.99018, -4.31662], [50.99031, -4.31517], [50.99053, -4.31400], [50.99099, -4.31440], [50.99149, -4.31538], [50.99148, -4.31670], [50.99133, -4.31667], [50.99127, -4.31610], [50.99114, -4.31628], [50.99111, -4.31659], [50.99102, -4.31668], [50.99089, -4.31718], [50.99053, -4.31722]],
      [[50.98894, -4.31410], [50.98839, -4.31222], [50.98905, -4.31205], [50.98966, -4.31211], [50.98972, -4.31195], [50.98995, -4.31200], [50.99019, -4.31186], [50.99057, -4.31196], [50.99059, -4.31298], [50.99054, -4.31317], [50.99051, -4.31391], [50.98978, -4.31381]],
      [[50.98837, -4.31213], [50.98796, -4.31035], [50.98811, -4.31023], [50.98854, -4.31021], [50.98899, -4.31029], [50.98952, -4.31026], [50.98981, -4.31051], [50.98991, -4.31053], [50.98997, -4.31050], [50.99009, -4.31023], [50.99016, -4.31019], [50.99051, -4.31023], [50.99048, -4.31059], [50.99030, -4.31176], [50.99017, -4.31180], [50.98996, -4.31194], [50.98970, -4.31186], [50.98965, -4.31206], [50.98900, -4.31199]],
      [[50.99055, -4.31394], [50.99058, -4.31319], [50.99063, -4.31300], [50.99062, -4.31195], [50.99034, -4.31179], [50.99061, -4.31014], [50.99127, -4.31022], [50.99162, -4.31046], [50.99179, -4.31069], [50.99189, -4.31065], [50.99233, -4.31082], [50.99228, -4.31114], [50.99211, -4.31141], [50.99197, -4.31150], [50.99196, -4.31209], [50.99176, -4.31229], [50.99170, -4.31285], [50.99187, -4.31333], [50.99186, -4.31348], [50.99176, -4.31369], [50.99156, -4.31353], [50.99150, -4.31365], [50.99148, -4.31380], [50.99149, -4.31421], [50.99136, -4.31420], [50.99131, -4.31435], [50.99129, -4.31485], [50.99099, -4.31430]],
      [[50.99071, -4.31004], [50.99067, -4.30954], [50.99058, -4.30929], [50.99063, -4.30909], [50.99063, -4.30880], [50.99095, -4.30752], [50.99127, -4.30738], [50.99163, -4.30750], [50.99193, -4.30781], [50.99256, -4.30810], [50.99265, -4.30833], [50.99274, -4.30854], [50.99265, -4.30906], [50.99234, -4.31064], [50.99226, -4.31069], [50.99185, -4.31055], [50.99151, -4.31027], [50.99116, -4.31009]],
      [[50.99256, -4.31195], [50.99241, -4.31147], [50.99241, -4.31099], [50.99252, -4.31029], [50.99261, -4.30966], [50.99272, -4.30911], [50.99295, -4.30930], [50.99322, -4.30959], [50.99347, -4.30996], [50.99356, -4.31094], [50.99352, -4.31109], [50.99360, -4.31153], [50.99313, -4.31185], [50.99302, -4.31160], [50.99284, -4.31152], [50.99286, -4.31172]]
    ];

    let toggle = '#fff';

    for (var i = 0; i < polygonsCoords.length; i++) {
      let polygon = L.polygon(polygonsCoords[i], {
        color: '#fff',
        fillColor: '#fff',
        fillOpacity: 0.1,
        weight: 1,
        dashArray: '3'
      });
      polygon.addTo(map);
      var center = polygon.getBounds().getCenter();
      var number = (i + 1).toString();
      var custom_icon = L.divIcon({
        className: 'number-icon',
        html: number
      });
      var marker = L.marker(center, { icon: custom_icon }).addTo(map);
    }





    L.geolet({ position: 'bottomleft', className: 'locDot', enableHighAccuracy: true, maximumAge: 30000, timeout: 27000 }).addTo(map);

    var osmGeocoder = new L.Control.OSMGeocoder(options);
    map.addControl(osmGeocoder);

  </script>

</body>

</html>